<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haxpedia - Haxball Ansiklopedisi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a0b2e 0%, #16213e 50%, #0f3460 100%);
            color: #ffffff;
            min-height: 100vh;
        }

        .header {
            background: rgba(26, 11, 46, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid #10b981;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(45deg, #8b5cf6, #10b981);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-menu a {
            color: #e5e7eb;
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.5rem 1rem;
            border-radius: 8px;
        }

        .nav-menu a:hover, .nav-menu a.active {
            color: #10b981;
            background: rgba(16, 185, 129, 0.1);
            transform: translateY(-2px);
        }

        .auth-section {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .auth-btn {
            background: linear-gradient(135deg, #8b5cf6, #10b981);
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.3);
        }

        .user-info {
            display: none;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 20px;
            border: 1px solid #10b981;
        }

        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 3rem 2rem;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 3rem;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .admin-panel {
            background: rgba(26, 11, 46, 0.6);
            border-radius: 16px;
            padding: 2rem;
            border: 1px solid rgba(16, 185, 129, 0.3);
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            color: #10b981;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 0.7rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.2);
        }

        .logo-upload {
            border: 2px dashed rgba(16, 185, 129, 0.3);
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .logo-upload:hover {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.05);
        }

        .logo-preview {
            max-width: 100px;
            max-height: 100px;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .team-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(16, 185, 129, 0.1));
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid rgba(139, 92, 246, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 1rem;
        }

        .team-card:hover {
            transform: translateY(-3px);
            border-color: #10b981;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.2);
        }

        .team-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .team-logo {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
            background: rgba(16, 185, 129, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .team-name {
            font-size: 1.4rem;
            font-weight: bold;
            color: #10b981;
        }

        .team-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .stat-item {
            text-align: center;
            padding: 0.5rem;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 6px;
        }

        .stat-value {
            font-weight: bold;
            color: #10b981;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #d1d5db;
        }

        .player-card {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .player-card:hover {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .player-name {
            font-weight: bold;
            color: #ffffff;
        }

        .player-position {
            background: rgba(16, 185, 129, 0.2);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            color: #10b981;
        }

        .match-card {
            background: rgba(26, 11, 46, 0.6);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .match-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .match-teams {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .match-score {
            font-size: 1.2rem;
            font-weight: bold;
            color: #10b981;
        }

        .live-indicator {
            background: #ef4444;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            animation: pulse 2s infinite;
        }

        .league-table {
            background: rgba(26, 11, 46, 0.6);
            border-radius: 12px;
            overflow: hidden;
        }

        .table-header {
            background: rgba(139, 92, 246, 0.2);
            padding: 1rem;
            display: grid;
            grid-template-columns: 50px 2fr 1fr 1fr 1fr 1fr;
            gap: 1rem;
            font-weight: bold;
            color: #10b981;
        }

        .table-row {
            padding: 0.8rem 1rem;
            display: grid;
            grid-template-columns: 50px 2fr 1fr 1fr 1fr 1fr;
            gap: 1rem;
            border-bottom: 1px solid rgba(139, 92, 246, 0.1);
            align-items: center;
        }

        .table-row:hover {
            background: rgba(16, 185, 129, 0.05);
        }

        .position {
            font-weight: bold;
            color: #10b981;
        }

        .team-info-table {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .team-logo-small {
            width: 30px;
            height: 30px;
            border-radius: 4px;
            object-fit: cover;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #1a0b2e, #16213e);
            border-radius: 16px;
            padding: 2rem;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: #ffffff;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .section-title {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #10b981;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .tab-btn {
            padding: 0.8rem 1.5rem;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 8px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn.active, .tab-btn:hover {
            background: rgba(16, 185, 129, 0.2);
            border-color: #10b981;
            color: #10b981;
        }

        .submit-btn {
            background: linear-gradient(135deg, #8b5cf6, #10b981);
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.3);
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            border-radius: 8px;
            padding: 1rem;
            color: #fca5a5;
            margin-bottom: 1rem;
        }

        .success-message {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid #10b981;
            border-radius: 8px;
            padding: 1rem;
            color: #6ee7b7;
            margin-bottom: 1rem;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                padding: 2rem 1rem;
            }
            
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .table-header, .table-row {
                grid-template-columns: 40px 2fr 60px 60px 60px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="nav-container">
            <a href="#" class="logo">‚öΩ Haxpedia</a>
            <nav>
                <ul class="nav-menu">
                    <li><a href="#" data-section="teams" class="nav-link active">Takƒ±mlar</a></li>
                    <li><a href="#" data-section="matches" class="nav-link">Ma√ßlar</a></li>
                    <li><a href="#" data-section="league" class="nav-link">Lig Tablosu</a></li>
                    <li><a href="#" data-section="players" class="nav-link">Oyuncular</a></li>
                    <li><a href="#" data-section="admin" class="nav-link" id="adminTab" style="display: none;">Y√∂netim</a></li>
                </ul>
            </nav>
            <div class="auth-section">
                <button class="auth-btn" id="loginBtn">üîë Giri≈ü Yap</button>
                <div class="user-info" id="userInfo">
                    <span id="userName">Kullanƒ±cƒ±</span>
                    <button class="auth-btn" id="signOutBtn">√áƒ±kƒ±≈ü</button>
                </div>
            </div>
        </div>
    </header>

    <div class="main-content">
        <!-- Takƒ±mlar B√∂l√ºm√º -->
        <div id="teams-section" class="section active">
            <h2 class="section-title">üèÜ Takƒ±mlar</h2>
            <div id="teamsContainer">Takƒ±mlar y√ºkleniyor...</div>
        </div>

        <!-- Ma√ßlar B√∂l√ºm√º -->
        <div id="matches-section" class="section">
            <h2 class="section-title">‚öΩ Ma√ß Sonu√ßlarƒ±</h2>
            <div id="matchesContainer">
                <div class="match-card">
                    <div class="match-header">
                        <div class="match-teams">
                            <div class="team-logo">üî¥</div>
                            <span>Galatasaray HB</span>
                            <span class="match-score">2 - 1</span>
                            <span>Fenerbah√ße HB</span>
                            <div class="team-logo">üü°</div>
                        </div>
                        <span class="live-indicator">CANLI</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lig Tablosu B√∂l√ºm√º -->
        <div id="league-section" class="section">
            <h2 class="section-title">üìä S√ºper Lig Tablosu</h2>
            <div class="league-table">
                <div class="table-header">
                    <div>Sƒ±ra</div>
                    <div>Takƒ±m</div>
                    <div>O</div>
                    <div>G</div>
                    <div>A/G</div>
                    <div>P</div>
                </div>
                <div id="leagueTableContainer">Tablo y√ºkleniyor...</div>
            </div>
        </div>

        <!-- Oyuncular B√∂l√ºm√º -->
        <div id="players-section" class="section">
            <h2 class="section-title">üë• Oyuncular</h2>
            <div id="playersContainer">Oyuncular y√ºkleniyor...</div>
        </div>

        <!-- Admin Paneli -->
        <div id="admin-section" class="section">
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showAdminTab('team')">Takƒ±m Y√∂netimi</button>
                <button class="tab-btn" onclick="showAdminTab('match')">Ma√ß Y√∂netimi</button>
                <button class="tab-btn" onclick="showAdminTab('player')">Oyuncu Y√∂netimi</button>
            </div>

            <!-- Takƒ±m Y√∂netimi -->
            <div id="admin-team" class="admin-panel">
                <h3 class="section-title">‚ûï Takƒ±m Ekle/D√ºzenle</h3>
                <div id="messages"></div>
                <form id="teamForm">
                    <div class="form-group">
                        <label for="teamName">Takƒ±m Adƒ±:</label>
                        <input type="text" id="teamName" placeholder="√ñrn: Galatasaray HB" required>
                    </div>
                    <div class="form-group">
                        <label for="teamLeague">Lig:</label>
                        <select id="teamLeague" required>
                            <option value="">Lig Se√ßin</option>
                            <option value="S√ºper Lig">S√ºper Lig</option>
                            <option value="1. Lig">1. Lig</option>
                            <option value="2. Lig">2. Lig</option>
                            <option value="Amat√∂r">Amat√∂r</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="teamManager">Takƒ±m Menajeri:</label>
                        <input type="text" id="teamManager" placeholder="Menajerin adƒ±">
                    </div>
                    <div class="form-group">
                        <label>Takƒ±m Logosu:</label>
                        <div class="logo-upload" id="logoUpload">
                            <input type="file" id="logoInput" accept="image/*" style="display: none;">
                            <div id="logoPreview">üì∏ Logo y√ºklemek i√ßin tƒ±klayƒ±n</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="teamDescription">A√ßƒ±klama:</label>
                        <textarea id="teamDescription" rows="3" placeholder="Takƒ±m hakkƒ±nda kƒ±sa bilgi..."></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Takƒ±m Ekle</button>
                </form>
            </div>

            <!-- Ma√ß Y√∂netimi -->
            <div id="admin-match" class="admin-panel" style="display: none;">
                <h3 class="section-title">‚öΩ Ma√ß Ekle/D√ºzenle</h3>
                <form id="matchForm">
                    <div class="form-group">
                        <label for="homeTeam">Ev Sahibi Takƒ±m:</label>
                        <select id="homeTeam" required>
                            <option value="">Takƒ±m Se√ßin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="awayTeam">Deplasman Takƒ±mƒ±:</label>
                        <select id="awayTeam" required>
                            <option value="">Takƒ±m Se√ßin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="homeScore">Ev Sahibi Skor:</label>
                        <input type="number" id="homeScore" min="0" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="awayScore">Deplasman Skor:</label>
                        <input type="number" id="awayScore" min="0" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="matchDate">Ma√ß Tarihi:</label>
                        <input type="datetime-local" id="matchDate" required>
                    </div>
                    <div class="form-group">
                        <label for="matchStatus">Durum:</label>
                        <select id="matchStatus" required>
                            <option value="scheduled">Planlandƒ±</option>
                            <option value="live">Canlƒ±</option>
                            <option value="finished">Bitti</option>
                        </select>
                    </div>
                    <button type="submit" class="submit-btn">Ma√ß Ekle</button>
                </form>
            </div>

            <!-- Oyuncu Y√∂netimi -->
            <div id="admin-player" class="admin-panel" style="display: none;">
                <h3 class="section-title">üë§ Oyuncu Ekle/D√ºzenle</h3>
                <form id="playerForm">
                    <div class="form-group">
                        <label for="playerName">Oyuncu Adƒ±:</label>
                        <input type="text" id="playerName" placeholder="√ñrn: Mehmet Yƒ±lmaz" required>
                    </div>
                    <div class="form-group">
                        <label for="playerTeam">Takƒ±m:</label>
                        <select id="playerTeam" required>
                            <option value="">Takƒ±m Se√ßin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="playerPosition">Pozisyon:</label>
                        <select id="playerPosition" required>
                            <option value="">Pozisyon Se√ßin</option>
                            <option value="GK">Kaleci</option>
                            <option value="DEF">Defans</option>
                            <option value="MID">Orta Saha</option>
                            <option value="ATT">H√ºcum</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="playerAge">Ya≈ü:</label>
                        <input type="number" id="playerAge" min="16" max="50" placeholder="25">
                    </div>
                    <div class="form-group">
                        <label for="playerTrophies">Kazandƒ±ƒüƒ± Kupalar:</label>
                        <textarea id="playerTrophies" rows="2" placeholder="S√ºper Lig 2024, Kupa 2023..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="playerLeagues">Oynadƒ±ƒüƒ± Ligler:</label>
                        <textarea id="playerLeagues" rows="2" placeholder="S√ºper Lig, 1. Lig..."></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Oyuncu Ekle</button>
                </form>
            </div>
        </div>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="widget">
                <h3>üìä ƒ∞statistikler</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div style="text-align: center; padding: 1rem; background: rgba(139, 92, 246, 0.1); border-radius: 8px;">
                        <div style="font-size: 2rem; font-weight: bold; color: #10b981;" id="teamCount">0</div>
                        <div style="color: #d1d5db; font-size: 0.9rem;">Takƒ±m</div>
                    </div>
                    <div style="text-align: center; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                        <div style="font-size: 2rem; font-weight: bold; color: #8b5cf6;" id="playerCount">0</div>
                        <div style="color: #d1d5db; font-size: 0.9rem;">Oyuncu</div>
                    </div>
                </div>
            </div>

            <div class="widget">
                <h3>üî¥ Canlƒ± Ma√ßlar</h3>
                <div id="liveMatches">
                    <div style="color: #9ca3af; text-align: center; padding: 1rem;">
                        ≈ûu anda canlƒ± ma√ß yok
                    </div>
                </div>
            </div>

            <div class="widget">
                <h3>üèÜ Son ≈ûampiyon</h3>
                <div id="lastChampion" style="text-align: center; padding: 1rem;">
                    <div style="font-size: 2rem;">ü•á</div>
                    <div style="color: #10b981; font-weight: bold; margin-top: 0.5rem;">Galatasaray HB</div>
                    <div style="color: #d1d5db; font-size: 0.9rem;">S√ºper Lig 2024</div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Team Detail Modal -->
    <div id="teamModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('teamModal')">&times;</button>
            <div id="teamModalContent">Loading...</div>
        </div>
    </div>

    <!-- Player Detail Modal -->
    <div id="playerModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('playerModal')">&times;</button>
            <div id="playerModalContent">Loading...</div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, onSnapshot, serverTimestamp, query, where, orderBy } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getAuth, GoogleAuthProvider, signInWithPopup, signOut as firebaseSignOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';

        // Firebase yapƒ±landƒ±rmasƒ±
        const firebaseConfig = {
            apiKey: "AIzaSyDo0B8IIDK9Xeq4kIa3I0YK45wJS6vyzGY",
            authDomain: "haxpedia-e5054.firebaseapp.com",
            projectId: "haxpedia-e5054",
            storageBucket: "haxpedia-e5054.firebasestorage.app",
            messagingSenderId: "799081899351",
            appId: "1:799081899351:web:66943d0281fad08b910a12",
            measurementId: "G-NDCVR1Y354"
        };

        // Firebase ba≈ülatma
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const storage = getStorage(app);

        // Admin kullanƒ±cƒ±larƒ±
        const ADMIN_EMAILS = [
            'evrenalbayrak96@gmail.com',
            'admin@haxpedia.com'
        ];

        // Event Listeners (module scope'undan √ßƒ±karmak i√ßin)
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM y√ºklendi, event listener\'lar ekleniyor...');
            
            // Giri≈ü butonu - hem click hem de alternatif y√∂ntem
            const loginBtn = document.getElementById('loginBtn');
            if (loginBtn) {
                console.log('Login butonu bulundu, event listener ekleniyor...');
                
                // Ana event listener
                loginBtn.addEventListener('click', handleLogin);
                
                // Test i√ßin onclick da ekle
                loginBtn.onclick = handleLogin;
                
                console.log('Event listener\'lar eklendi');
            } else {
                console.error('Login butonu bulunamadƒ±!');
            }

            // Login fonksiyonu
            async function handleLogin() {
                console.log('üî• Login fonksiyonu √ßalƒ±≈ütƒ±!');
                try {
                    const provider = new GoogleAuthProvider();
                    console.log('Google provider olu≈üturuldu, popup a√ßƒ±lƒ±yor...');
                    const result = await signInWithPopup(auth, provider);
                    console.log('Giri≈ü ba≈üarƒ±lƒ±:', result.user);
                    showMessage('Ba≈üarƒ±yla giri≈ü yapƒ±ldƒ±!', 'success');
                } catch (error) {
                    console.error('Giri≈ü hatasƒ±:', error);
                    showMessage('Giri≈ü yapƒ±lƒ±rken hata olu≈ütu: ' + error.message, 'error');
                }
            }

            // √áƒ±kƒ±≈ü butonu
            const signOutBtn = document.getElementById('signOutBtn');
            if (signOutBtn) {
                console.log('SignOut butonu bulundu, event listener ekleniyor...');
                signOutBtn.addEventListener('click', async function() {
                    console.log('√áƒ±kƒ±≈ü butonuna tƒ±klandƒ±!');
                    try {
                        await firebaseSignOut(auth);
                        showMessage('Ba≈üarƒ±yla √ßƒ±kƒ±≈ü yapƒ±ldƒ±!', 'success');
                    } catch (error) {
                        console.error('√áƒ±kƒ±≈ü hatasƒ±:', error);
                        showMessage('√áƒ±kƒ±≈ü yapƒ±lƒ±rken hata olu≈ütu: ' + error.message, 'error');
                    }
                });
            } else {
                console.error('SignOut butonu bulunamadƒ±!');
            }

            // Navigation men√ºs√º
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const sectionName = this.getAttribute('data-section');
                    showSection(sectionName);
                });
            });

            // Tab butonlarƒ±
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabName = this.textContent.toLowerCase().includes('takƒ±m') ? 'team' :
                                   this.textContent.toLowerCase().includes('ma√ß') ? 'match' : 'player';
                    showAdminTab(tabName);
                });
            });

            // Logo upload
            document.getElementById('logoUpload').addEventListener('click', function() {
                document.getElementById('logoInput').click();
            });

            document.getElementById('logoInput').addEventListener('change', function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('logoPreview').innerHTML = 
                            `<img src="${e.target.result}" class="logo-preview" alt="Logo">`;
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Form submit handlers
            document.getElementById('teamForm').addEventListener('submit', async function(event) {
                event.preventDefault();
                
                if (!currentUser || !isAdmin) {
                    showMessage('Takƒ±m ekleme yetkisine sahip deƒüilsiniz!', 'error');
                    return;
                }

                const logoFile = document.getElementById('logoInput').files[0];
                let logoUrl = '';

                try {
                    // Logo y√ºkle
                    if (logoFile) {
                        const logoRef = ref(storage, `team-logos/${Date.now()}_${logoFile.name}`);
                        const snapshot = await uploadBytes(logoRef, logoFile);
                        logoUrl = await getDownloadURL(snapshot.ref);
                    }

                    const teamData = {
                        name: document.getElementById('teamName').value,
                        league: document.getElementById('teamLeague').value,
                        manager: document.getElementById('teamManager').value,
                        description: document.getElementById('teamDescription').value,
                        logo: logoUrl,
                        addedBy: currentUser.displayName || 'Anonim',
                        adminEmail: currentUser.email,
                        createdAt: serverTimestamp(),
                        // ƒ∞statistikler
                        played: 0,
                        won: 0,
                        drawn: 0,
                        lost: 0,
                        goalsFor: 0,
                        goalsAgainst: 0,
                        points: 0
                    };

                    await addDoc(collection(db, 'teams'), teamData);
                    showMessage('Takƒ±m ba≈üarƒ±yla eklendi!', 'success');

                    // Form temizle
                    this.reset();
                    document.getElementById('logoPreview').innerHTML = 'üì∏ Logo y√ºklemek i√ßin tƒ±klayƒ±n';

                    loadTeams();
                    loadAdminData();
                } catch (error) {
                    console.error('Takƒ±m ekleme hatasƒ±:', error);
                    showMessage('Takƒ±m eklenirken hata olu≈ütu: ' + error.message, 'error');
                }
            });

        function showSection(sectionName) {
            // T√ºm sekmeleri gizle
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Nav men√º aktif durumunu g√ºncelle
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Se√ßilen b√∂l√ºm√º g√∂ster
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            // Aktif nav linkini i≈üaretle
            document.querySelector(`[data-section="${sectionName}"]`).classList.add('active');
            
            // B√∂l√ºme g√∂re veri y√ºkle
            switch(sectionName) {
                case 'teams':
                    loadTeams();
                    break;
                case 'matches':
                    loadMatches();
                    break;
                case 'league':
                    loadLeagueTable();
                    break;
                case 'players':
                    loadPlayers();
                    break;
                case 'admin':
                    loadAdminData();
                    break;
            }
        }

        function showAdminTab(tabName) {
            // T√ºm admin panellerini gizle
            document.querySelectorAll('.admin-panel').forEach(panel => {
                panel.style.display = 'none';
            });
            
            // Tab butonlarƒ±nƒ± g√ºncelle
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Se√ßilen paneli g√∂ster
            document.getElementById('admin-' + tabName).style.display = 'block';
            
            // Aktif tab button'ƒ± bul ve i≈üaretle
            const activeBtn = Array.from(document.querySelectorAll('.tab-btn')).find(btn => {
                const text = btn.textContent.toLowerCase();
                return (tabName === 'team' && text.includes('takƒ±m')) ||
                       (tabName === 'match' && text.includes('ma√ß')) ||
                       (tabName === 'player' && text.includes('oyuncu'));
            });
            if (activeBtn) activeBtn.classList.add('active');
        }

        function showTeamDetail(teamId) {
            const team = teams.find(t => t.id === teamId);
            if (!team) return;

            const teamPlayers = players.filter(p => p.team === team.name);
            const teamMatches = matches.filter(m => m.homeTeam === team.name || m.awayTeam === team.name);

            const modalContent = `
                <div class="team-header">
                    <div class="team-logo">${team.logo ? `<img src="${team.logo}" alt="${team.name}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">` : '‚öΩ'}</div>
                    <div>
                        <h2 class="team-name">${team.name}</h2>
                        <p style="color: #d1d5db;">${team.league} ‚Ä¢ Menajeri: ${team.manager || 'Belirtilmemi≈ü'}</p>
                    </div>
                </div>

                <div class="team-stats">
                    <div class="stat-item">
                        <div class="stat-value">${team.played || 0}</div>
                        <div class="stat-label">Oynanan</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${team.won || 0}</div>
                        <div class="stat-label">Galibiyet</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${team.drawn || 0}</div>
                        <div class="stat-label">Beraberlik</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${team.lost || 0}</div>
                        <div class="stat-label">Maƒülubiyet</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${team.points || 0}</div>
                        <div class="stat-label">Puan</div>
                    </div>
                </div>

                <h3 style="color: #10b981; margin: 2rem 0 1rem;">üë• Kadro (${teamPlayers.length} oyuncu)</h3>
                <div>
                    ${teamPlayers.length > 0 ? teamPlayers.map(player => `
                        <div class="player-card" style="cursor: pointer;" data-player-id="${player.id}">
                            <div class="player-header">
                                <span class="player-name">${player.name}</span>
                                <span class="player-position">${player.position}</span>
                            </div>
                            <div style="font-size: 0.9rem; color: #d1d5db; margin-top: 0.5rem;">
                                ${player.age ? `${player.age} ya≈ü` : ''} ‚Ä¢ ${player.matchesPlayed || 0} ma√ß
                            </div>
                        </div>
                    `).join('') : '<p style="color: #9ca3af;">Hen√ºz oyuncu eklenmemi≈ü.</p>'}
                </div>

                <h3 style="color: #10b981; margin: 2rem 0 1rem;">‚öΩ Son Ma√ßlar</h3>
                <div>
                    ${teamMatches.length > 0 ? teamMatches.slice(-5).map(match => `
                        <div class="match-card">
                            <div class="match-header">
                                <div class="match-teams">
                                    <span>${match.homeTeam}</span>
                                    <span class="match-score">${match.homeScore || 0} - ${match.awayScore || 0}</span>
                                    <span>${match.awayTeam}</span>
                                </div>
                                <span style="font-size: 0.8rem; color: #9ca3af;">
                                    ${formatDate(match.matchDate)}
                                </span>
                            </div>
                        </div>
                    `).join('') : '<p style="color: #9ca3af;">Hen√ºz ma√ß oynanmamƒ±≈ü.</p>'}
                </div>
            `;

            document.getElementById('teamModalContent').innerHTML = modalContent;
            document.getElementById('teamModal').style.display = 'block';

            // Player cards i√ßin event listener ekle
            document.querySelectorAll('[data-player-id]').forEach(card => {
                card.addEventListener('click', function() {
                    const playerId = this.getAttribute('data-player-id');
                    showPlayerDetail(playerId);
                });
            });
        }

        function showPlayerDetail(playerId) {
            const player = players.find(p => p.id === playerId);
            if (!player) return;

            const modalContent = `
                <h2 style="color: #10b981; margin-bottom: 1rem;">${player.name}</h2>
                
                <div style="background: rgba(139, 92, 246, 0.1); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                    <h3 style="color: #8b5cf6; margin-bottom: 1rem;">üìä Oyuncu Bilgileri</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                        <div>
                            <strong style="color: #10b981;">Takƒ±m:</strong><br>
                            <span style="color: #d1d5db;">${player.team}</span>
                        </div>
                        <div>
                            <strong style="color: #10b981;">Pozisyon:</strong><br>
                            <span style="color: #d1d5db;">${player.position}</span>
                        </div>
                        <div>
                            <strong style="color: #10b981;">Ya≈ü:</strong><br>
                            <span style="color: #d1d5db;">${player.age || 'Belirtilmemi≈ü'}</span>
                        </div>
                        <div>
                            <strong style="color: #10b981;">Ma√ß Sayƒ±sƒ±:</strong><br>
                            <span style="color: #d1d5db;">${player.matchesPlayed || 0}</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(16, 185, 129, 0.1); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                    <h3 style="color: #10b981; margin-bottom: 1rem;">üèÜ Ba≈üarƒ±lar</h3>
                    <div style="margin-bottom: 1rem;">
                        <strong style="color: #10b981;">Kazandƒ±ƒüƒ± Kupalar:</strong><br>
                        <span style="color: #d1d5db;">${player.trophies || 'Hen√ºz kupa kazanmamƒ±≈ü'}</span>
                    </div>
                    <div>
                        <strong style="color: #10b981;">Oynadƒ±ƒüƒ± Ligler:</strong><br>
                        <span style="color: #d1d5db;">${player.leagues || 'Bilgi yok'}</span>
                    </div>
                </div>

                <div style="background: rgba(139, 92, 246, 0.1); padding: 1.5rem; border-radius: 8px;">
                    <h3 style="color: #8b5cf6; margin-bottom: 1rem;">üìà ƒ∞statistikler</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 1rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #10b981;">${player.goals || 0}</div>
                            <div style="color: #d1d5db; font-size: 0.9rem;">Gol</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #8b5cf6;">${player.assists || 0}</div>
                            <div style="color: #d1d5db; font-size: 0.9rem;">Asist</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #10b981;">${player.matchesPlayed || 0}</div>
                            <div style="color: #d1d5db; font-size: 0.9rem;">Ma√ß</div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('playerModalContent').innerHTML = modalContent;
            document.getElementById('playerModal').style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Global fonksiyonlar
        window.signInWithGoogle = async function() {
            try {
                const provider = new GoogleAuthProvider();
                const result = await signInWithPopup(auth, provider);
                showMessage('Ba≈üarƒ±yla giri≈ü yapƒ±ldƒ±!', 'success');
            } catch (error) {
                console.error('Giri≈ü hatasƒ±:', error);
                showMessage('Giri≈ü yapƒ±lƒ±rken hata olu≈ütu: ' + error.message, 'error');
            }
        };

        window.signOut = async function() {
            try {
                await firebaseSignOut(auth);
                showMessage('Ba≈üarƒ±yla √ßƒ±kƒ±≈ü yapƒ±ldƒ±!', 'success');
            } catch (error) {
                console.error('√áƒ±kƒ±≈ü hatasƒ±:', error);
                showMessage('√áƒ±kƒ±≈ü yapƒ±lƒ±rken hata olu≈ütu: ' + error.message, 'error');
            }
        };

        window.showSection = function(sectionName) {
            // T√ºm sekmeleri gizle
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Nav men√º aktif durumunu g√ºncelle
            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Se√ßilen b√∂l√ºm√º g√∂ster
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            // Aktif nav linkini i≈üaretle
            event.target.classList.add('active');
            
            // B√∂l√ºme g√∂re veri y√ºkle
            switch(sectionName) {
                case 'teams':
                    loadTeams();
                    break;
                case 'matches':
                    loadMatches();
                    break;
                case 'league':
                    loadLeagueTable();
                    break;
                case 'players':
                    loadPlayers();
                    break;
                case 'admin':
                    loadAdminData();
                    break;
            }
        };

        window.showAdminTab = function(tabName) {
            // T√ºm admin panellerini gizle
            document.querySelectorAll('.admin-panel').forEach(panel => {
                panel.style.display = 'none';
            });
            
            // Tab butonlarƒ±nƒ± g√ºncelle
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Se√ßilen paneli g√∂ster
            document.getElementById('admin-' + tabName).style.display = 'block';
            event.target.classList.add('active');
        };

        window.previewLogo = function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('logoPreview').innerHTML = 
                        `<img src="${e.target.result}" class="logo-preview" alt="Logo">`;
                };
                reader.readAsDataURL(file);
            }
        };

        window.addTeam = async function(event) {
            event.preventDefault();
            
            if (!currentUser || !isAdmin) {
                showMessage('Takƒ±m ekleme yetkisine sahip deƒüilsiniz!', 'error');
                return;
            }

            const logoFile = document.getElementById('logoInput').files[0];
            let logoUrl = '';

            try {
                // Logo y√ºkle
                if (logoFile) {
                    const logoRef = ref(storage, `team-logos/${Date.now()}_${logoFile.name}`);
                    const snapshot = await uploadBytes(logoRef, logoFile);
                    logoUrl = await getDownloadURL(snapshot.ref);
                }

                const teamData = {
                    name: document.getElementById('teamName').value,
                    league: document.getElementById('teamLeague').value,
                    manager: document.getElementById('teamManager').value,
                    description: document.getElementById('teamDescription').value,
                    logo: logoUrl,
                    addedBy: currentUser.displayName || 'Anonim',
                    adminEmail: currentUser.email,
                    createdAt: serverTimestamp(),
                    // ƒ∞statistikler
                    played: 0,
                    won: 0,
                    drawn: 0,
                    lost: 0,
                    goalsFor: 0,
                    goalsAgainst: 0,
                    points: 0
                };

                await addDoc(collection(db, 'teams'), teamData);
                showMessage('Takƒ±m ba≈üarƒ±yla eklendi!', 'success');

                // Form temizle
                document.getElementById('teamName').value = '';
                document.getElementById('teamLeague').value = '';
                document.getElementById('teamManager').value = '';
                document.getElementById('teamDescription').value = '';
                document.getElementById('logoInput').value = '';
                document.getElementById('logoPreview').innerHTML = 'üì∏ Logo y√ºklemek i√ßin tƒ±klayƒ±n';

                loadTeams();
                loadAdminData();
            } catch (error) {
                console.error('Takƒ±m ekleme hatasƒ±:', error);
                showMessage('Takƒ±m eklenirken hata olu≈ütu: ' + error.message, 'error');
            }
        };

        window.addMatch = async function(event) {
            event.preventDefault();
            
            if (!currentUser || !isAdmin) {
                showMessage('Ma√ß ekleme yetkisine sahip deƒüilsiniz!', 'error');
                return;
            }

            try {
                const homeTeam = document.getElementById('homeTeam').value;
                const awayTeam = document.getElementById('awayTeam').value;
                const homeScore = parseInt(document.getElementById('homeScore').value) || 0;
                const awayScore = parseInt(document.getElementById('awayScore').value) || 0;
                const matchDate = document.getElementById('matchDate').value;
                const status = document.getElementById('matchStatus').value;

                const matchData = {
                    homeTeam,
                    awayTeam,
                    homeScore,
                    awayScore,
                    matchDate: new Date(matchDate),
                    status,
                    addedBy: currentUser.email,
                    createdAt: serverTimestamp()
                };

                await addDoc(collection(db, 'matches'), matchData);

                // Eƒüer ma√ß bittiyse istatistikleri g√ºncelle
                if (status === 'finished') {
                    await updateTeamStats(homeTeam, awayTeam, homeScore, awayScore);
                }

                showMessage('Ma√ß ba≈üarƒ±yla eklendi!', 'success');
                
                // Form temizle
                document.getElementById('homeScore').value = '';
                document.getElementById('awayScore').value = '';
                document.getElementById('matchDate').value = '';

                loadMatches();
                loadLeagueTable();
            } catch (error) {
                console.error('Ma√ß ekleme hatasƒ±:', error);
                showMessage('Ma√ß eklenirken hata olu≈ütu: ' + error.message, 'error');
            }
        };

        window.addPlayer = async function(event) {
            event.preventDefault();
            
            if (!currentUser || !isAdmin) {
                showMessage('Oyuncu ekleme yetkisine sahip deƒüilsiniz!', 'error');
                return;
            }

            try {
                const playerData = {
                    name: document.getElementById('playerName').value,
                    team: document.getElementById('playerTeam').value,
                    position: document.getElementById('playerPosition').value,
                    age: parseInt(document.getElementById('playerAge').value) || null,
                    trophies: document.getElementById('playerTrophies').value,
                    leagues: document.getElementById('playerLeagues').value,
                    addedBy: currentUser.email,
                    createdAt: serverTimestamp(),
                    // ƒ∞statistikler
                    matchesPlayed: 0,
                    goals: 0,
                    assists: 0
                };

                await addDoc(collection(db, 'players'), playerData);
                showMessage('Oyuncu ba≈üarƒ±yla eklendi!', 'success');

                // Form temizle
                document.getElementById('playerName').value = '';
                document.getElementById('playerAge').value = '';
                document.getElementById('playerTrophies').value = '';
                document.getElementById('playerLeagues').value = '';

                loadPlayers();
                loadAdminData();
            } catch (error) {
                console.error('Oyuncu ekleme hatasƒ±:', error);
                showMessage('Oyuncu eklenirken hata olu≈ütu: ' + error.message, 'error');
            }
        };

        window.showTeamDetail = function(teamId) {
            const team = teams.find(t => t.id === teamId);
            if (!team) return;

            const teamPlayers = players.filter(p => p.team === team.name);
            const teamMatches = matches.filter(m => m.homeTeam === team.name || m.awayTeam === team.name);

            const modalContent = `
                <div class="team-header">
                    <div class="team-logo">${team.logo ? `<img src="${team.logo}" alt="${team.name}">` : '‚öΩ'}</div>
                    <div>
                        <h2 class="team-name">${team.name}</h2>
                        <p style="color: #d1d5db;">${team.league} ‚Ä¢ Menajeri: ${team.manager || 'Belirtilmemi≈ü'}</p>
                    </div>
                </div>

                <div class="team-stats">
                    <div class="stat-item">
                        <div class="stat-value">${team.played || 0}</div>
                        <div class="stat-label">Oynanan</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${team.won || 0}</div>
                        <div class="stat-label">Galibiyet</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${team.drawn || 0}</div>
                        <div class="stat-label">Beraberlik</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${team.lost || 0}</div>
                        <div class="stat-label">Maƒülubiyet</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${team.points || 0}</div>
                        <div class="stat-label">Puan</div>
                    </div>
                </div>

                <h3 style="color: #10b981; margin: 2rem 0 1rem;">üë• Kadro (${teamPlayers.length} oyuncu)</h3>
                <div>
                    ${teamPlayers.map(player => `
                        <div class="player-card" onclick="showPlayerDetail('${player.id}')">
                            <div class="player-header">
                                <span class="player-name">${player.name}</span>
                                <span class="player-position">${player.position}</span>
                            </div>
                            <div style="font-size: 0.9rem; color: #d1d5db; margin-top: 0.5rem;">
                                ${player.age ? `${player.age} ya≈ü` : ''} ‚Ä¢ ${player.matchesPlayed || 0} ma√ß
                            </div>
                        </div>
                    `).join('')}
                </div>

                <h3 style="color: #10b981; margin: 2rem 0 1rem;">‚öΩ Son Ma√ßlar</h3>
                <div>
                    ${teamMatches.slice(-5).map(match => `
                        <div class="match-card">
                            <div class="match-header">
                                <div class="match-teams">
                                    <span>${match.homeTeam}</span>
                                    <span class="match-score">${match.homeScore} - ${match.awayScore}</span>
                                    <span>${match.awayTeam}</span>
                                </div>
                                <span style="font-size: 0.8rem; color: #9ca3af;">
                                    ${formatDate(match.matchDate)}
                                </span>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;

            document.getElementById('teamModalContent').innerHTML = modalContent;
            document.getElementById('teamModal').style.display = 'block';
        };

        window.showPlayerDetail = function(playerId) {
            const player = players.find(p => p.id === playerId);
            if (!player) return;

            const modalContent = `
                <h2 style="color: #10b981; margin-bottom: 1rem;">${player.name}</h2>
                
                <div style="background: rgba(139, 92, 246, 0.1); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                    <h3 style="color: #8b5cf6; margin-bottom: 1rem;">üìä Oyuncu Bilgileri</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                        <div>
                            <strong style="color: #10b981;">Takƒ±m:</strong><br>
                            <span style="color: #d1d5db;">${player.team}</span>
                        </div>
                        <div>
                            <strong style="color: #10b981;">Pozisyon:</strong><br>
                            <span style="color: #d1d5db;">${player.position}</span>
                        </div>
                        <div>
                            <strong style="color: #10b981;">Ya≈ü:</strong><br>
                            <span style="color: #d1d5db;">${player.age || 'Belirtilmemi≈ü'}</span>
                        </div>
                        <div>
                            <strong style="color: #10b981;">Ma√ß Sayƒ±sƒ±:</strong><br>
                            <span style="color: #d1d5db;">${player.matchesPlayed || 0}</span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(16, 185, 129, 0.1); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                    <h3 style="color: #10b981; margin-bottom: 1rem;">üèÜ Ba≈üarƒ±lar</h3>
                    <div style="margin-bottom: 1rem;">
                        <strong style="color: #10b981;">Kazandƒ±ƒüƒ± Kupalar:</strong><br>
                        <span style="color: #d1d5db;">${player.trophies || 'Hen√ºz kupa kazanmamƒ±≈ü'}</span>
                    </div>
                    <div>
                        <strong style="color: #10b981;">Oynadƒ±ƒüƒ± Ligler:</strong><br>
                        <span style="color: #d1d5db;">${player.leagues || 'Bilgi yok'}</span>
                    </div>
                </div>

                <div style="background: rgba(139, 92, 246, 0.1); padding: 1.5rem; border-radius: 8px;">
                    <h3 style="color: #8b5cf6; margin-bottom: 1rem;">üìà ƒ∞statistikler</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 1rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #10b981;">${player.goals || 0}</div>
                            <div style="color: #d1d5db; font-size: 0.9rem;">Gol</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #8b5cf6;">${player.assists || 0}</div>
                            <div style="color: #d1d5db; font-size: 0.9rem;">Asist</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #10b981;">${player.matchesPlayed || 0}</div>
                            <div style="color: #d1d5db; font-size: 0.9rem;">Ma√ß</div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('playerModalContent').innerHTML = modalContent;
            document.getElementById('playerModal').style.display = 'block';
        };

        window.closeModal = function(modalId) {
            document.getElementById(modalId).style.display = 'none';
        };

        async function updateTeamStats(homeTeam, awayTeam, homeScore, awayScore) {
            try {
                const teamsSnapshot = await getDocs(collection(db, 'teams'));
                const teamsList = teamsSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

                const homeTeamData = teamsList.find(t => t.name === homeTeam);
                const awayTeamData = teamsList.find(t => t.name === awayTeam);

                if (homeTeamData && awayTeamData) {
                    // Ev sahibi takƒ±m istatistikleri
                    const homeStats = {
                        played: (homeTeamData.played || 0) + 1,
                        goalsFor: (homeTeamData.goalsFor || 0) + homeScore,
                        goalsAgainst: (homeTeamData.goalsAgainst || 0) + awayScore
                    };

                    if (homeScore > awayScore) {
                        homeStats.won = (homeTeamData.won || 0) + 1;
                        homeStats.points = (homeTeamData.points || 0) + 3;
                    } else if (homeScore === awayScore) {
                        homeStats.drawn = (homeTeamData.drawn || 0) + 1;
                        homeStats.points = (homeTeamData.points || 0) + 1;
                    } else {
                        homeStats.lost = (homeTeamData.lost || 0) + 1;
                    }

                    // Deplasman takƒ±mƒ± istatistikleri
                    const awayStats = {
                        played: (awayTeamData.played || 0) + 1,
                        goalsFor: (awayTeamData.goalsFor || 0) + awayScore,
                        goalsAgainst: (awayTeamData.goalsAgainst || 0) + homeScore
                    };

                    if (awayScore > homeScore) {
                        awayStats.won = (awayTeamData.won || 0) + 1;
                        awayStats.points = (awayTeamData.points || 0) + 3;
                    } else if (awayScore === homeScore) {
                        awayStats.drawn = (awayTeamData.drawn || 0) + 1;
                        awayStats.points = (awayTeamData.points || 0) + 1;
                    } else {
                        awayStats.lost = (awayTeamData.lost || 0) + 1;
                    }

                    // Firebase'de g√ºncelle (Not: updateDoc import edilmeli)
                    // Bu kƒ±sƒ±m demo ama√ßlƒ±, ger√ßek uygulamada updateDoc kullanƒ±lmalƒ±
                    console.log('Takƒ±m istatistikleri g√ºncellendi:', { homeStats, awayStats });
                }
            } catch (error) {
                console.error('ƒ∞statistik g√ºncelleme hatasƒ±:', error);
            }
        }

        function updateUserInterface() {
            const loginBtn = document.getElementById('loginBtn');
            const userInfo = document.getElementById('userInfo');
            const adminTab = document.getElementById('adminTab');
            const userName = document.getElementById('userName');

            if (currentUser) {
                loginBtn.style.display = 'none';
                userInfo.style.display = 'flex';
                userName.textContent = currentUser.displayName || currentUser.email || 'Kullanƒ±cƒ±';
                
                if (isAdmin) {
                    adminTab.style.display = 'block';
                    userName.textContent += ' (Y√ñNETƒ∞Cƒ∞)';
                    userName.style.color = '#10b981';
                } else {
                    adminTab.style.display = 'none';
                    userName.style.color = '#ffffff';
                }
            } else {
                loginBtn.style.display = 'block';
                userInfo.style.display = 'none';
                adminTab.style.display = 'none';
            }
        }

        function showMessage(message, type) {
            const messagesDiv = document.getElementById('messages');
            if (messagesDiv) {
                const messageClass = type === 'error' ? 'error-message' : 'success-message';
                messagesDiv.innerHTML = `<div class="${messageClass}">${message}</div>`;
                
                setTimeout(() => {
                    messagesDiv.innerHTML = '';
                }, 5000);
            }
        }

        async function loadTeams() {
            const container = document.getElementById('teamsContainer');
            
            try {
                const querySnapshot = await getDocs(collection(db, 'teams'));
                teams = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

                if (teams.length === 0) {
                    container.innerHTML = '<div style="text-align: center; color: #9ca3af; padding: 2rem;">Hen√ºz takƒ±m eklenmemi≈ü.</div>';
                } else {
                    container.innerHTML = teams.map(team => `
                        <div class="team-card" onclick="showTeamDetail('${team.id}')">
                            <div class="team-header">
                                <div class="team-logo">
                                    ${team.logo ? `<img src="${team.logo}" alt="${team.name}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">` : '‚öΩ'}
                                </div>
                                <div>
                                    <div class="team-name">${team.name}</div>
                                    <div style="color: #d1d5db; margin-bottom: 0.5rem;">${team.league} ‚Ä¢ ${team.manager || 'Menajeri: Belirtilmemi≈ü'}</div>
                                    <div style="color: #9ca3af; font-size: 0.9rem;">${team.description || 'A√ßƒ±klama eklenmemi≈ü'}</div>
                                </div>
                            </div>
                            <div class="team-stats">
                                <div class="stat-item">
                                    <div class="stat-value">${team.played || 0}</div>
                                    <div class="stat-label">Ma√ß</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">${team.won || 0}</div>
                                    <div class="stat-label">G</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">${team.drawn || 0}</div>
                                    <div class="stat-label">B</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">${team.lost || 0}</div>
                                    <div class="stat-label">M</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">${team.points || 0}</div>
                                    <div class="stat-label">Puan</div>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }

                document.getElementById('teamCount').textContent = teams.length;
            } catch (error) {
                console.error('Takƒ±m y√ºkleme hatasƒ±:', error);
                container.innerHTML = '<div class="error-message">Takƒ±mlar y√ºklenirken hata olu≈ütu.</div>';
            }
        }

        async function loadMatches() {
            const container = document.getElementById('matchesContainer');
            
            try {
                const querySnapshot = await getDocs(query(collection(db, 'matches'), orderBy('matchDate', 'desc')));
                matches = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

                if (matches.length === 0) {
                    container.innerHTML = '<div style="text-align: center; color: #9ca3af; padding: 2rem;">Hen√ºz ma√ß eklenmemi≈ü.</div>';
                } else {
                    container.innerHTML = matches.map(match => `
                        <div class="match-card">
                            <div class="match-header">
                                <div class="match-teams">
                                    <span>${match.homeTeam}</span>
                                    <span class="match-score">${match.homeScore || 0} - ${match.awayScore || 0}</span>
                                    <span>${match.awayTeam}</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    ${match.status === 'live' ? '<span class="live-indicator">CANLI</span>' : ''}
                                    <span style="font-size: 0.9rem; color: #9ca3af;">
                                        ${formatDate(match.matchDate)}
                                    </span>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }

                // Canlƒ± ma√ßlarƒ± sidebar'da g√∂ster
                const liveMatches = matches.filter(m => m.status === 'live');
                const liveContainer = document.getElementById('liveMatches');
                
                if (liveMatches.length === 0) {
                    liveContainer.innerHTML = '<div style="color: #9ca3af; text-align: center; padding: 1rem;">≈ûu anda canlƒ± ma√ß yok</div>';
                } else {
                    liveContainer.innerHTML = liveMatches.map(match => `
                        <div style="padding: 0.5rem; background: rgba(139, 92, 246, 0.1); border-radius: 6px; margin-bottom: 0.5rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 0.9rem;">${match.homeTeam} vs ${match.awayTeam}</span>
                                <span style="color: #10b981; font-weight: bold;">${match.homeScore}-${match.awayScore}</span>
                            </div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Ma√ß y√ºkleme hatasƒ±:', error);
                container.innerHTML = '<div class="error-message">Ma√ßlar y√ºklenirken hata olu≈ütu.</div>';
            }
        }

        async function loadLeagueTable() {
            const container = document.getElementById('leagueTableContainer');
            
            try {
                // Takƒ±mlarƒ± puana g√∂re sƒ±rala
                const sortedTeams = [...teams].sort((a, b) => (b.points || 0) - (a.points || 0));

                if (sortedTeams.length === 0) {
                    container.innerHTML = '<div style="text-align: center; color: #9ca3af; padding: 2rem;">Hen√ºz takƒ±m eklenmemi≈ü.</div>';
                } else {
                    container.innerHTML = sortedTeams.map((team, index) => `
                        <div class="table-row">
                            <div class="position">${index + 1}</div>
                            <div class="team-info-table">
                                <div class="team-logo-small">
                                    ${team.logo ? `<img src="${team.logo}" alt="${team.name}" class="team-logo-small">` : '‚öΩ'}
                                </div>
                                <span>${team.name}</span>
                            </div>
                            <div>${team.played || 0}</div>
                            <div>${team.won || 0}</div>
                            <div>${(team.goalsFor || 0)}/${(team.goalsAgainst || 0)}</div>
                            <div style="font-weight: bold; color: #10b981;">${team.points || 0}</div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Lig tablosu y√ºkleme hatasƒ±:', error);
                container.innerHTML = '<div class="error-message">Lig tablosu y√ºklenirken hata olu≈ütu.</div>';
            }
        }

        async function loadPlayers() {
            const container = document.getElementById('playersContainer');
            
            try {
                const querySnapshot = await getDocs(collection(db, 'players'));
                players = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

                if (players.length === 0) {
                    container.innerHTML = '<div style="text-align: center; color: #9ca3af; padding: 2rem;">Hen√ºz oyuncu eklenmemi≈ü.</div>';
                } else {
                    // Takƒ±ma g√∂re gruplanmƒ±≈ü oyuncular
                    const playersByTeam = players.reduce((acc, player) => {
                        if (!acc[player.team]) acc[player.team] = [];
                        acc[player.team].push(player);
                        return acc;
                    }, {});

                    container.innerHTML = Object.entries(playersByTeam).map(([teamName, teamPlayers]) => `
                        <div style="margin-bottom: 2rem;">
                            <h3 style="color: #10b981; margin-bottom: 1rem; border-bottom: 1px solid rgba(16, 185, 129, 0.3); padding-bottom: 0.5rem;">
                                ${teamName} (${teamPlayers.length} oyuncu)
                            </h3>
                            <div style="display: grid; gap: 0.5rem;">
                                ${teamPlayers.map(player => `
                                    <div class="player-card" onclick="showPlayerDetail('${player.id}')">
