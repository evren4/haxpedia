<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Haxpedia</title>
    <style>
        body { background: #1a0b2e; color: white; font-family: Arial; padding: 2rem; }
        .auth-btn { background: #10b981; border: none; padding: 1rem 2rem; color: white; border-radius: 8px; cursor: pointer; }
        .team-card { background: rgba(255,255,255,0.1); padding: 1rem; margin: 1rem 0; border-radius: 8px; }
        input, select, textarea { width: 100%; padding: 0.5rem; margin: 0.5rem 0; background: rgba(255,255,255,0.1); border: 1px solid #10b981; color: white; }
        #adminPanel { display: none; }
    </style>
</head>
<body>
    <h1>Haxpedia</h1>
    
    <div id="auth">
        <button class="auth-btn" onclick="login()">Giriş Yap</button>
        <div id="userInfo" style="display:none;">
            <span id="userName"></span>
            <button onclick="logout()">Çıkış</button>
        </div>
    </div>

    <div id="teams">
        <h2>Takımlar</h2>
        <div id="teamsList"></div>
    </div>

    <div id="adminPanel">
        <h2>Takım Ekle</h2>
        <input id="teamName" placeholder="Takım adı">
        <select id="teamLeague">
            <option>Süper Lig</option>
            <option>1. Lig</option>
        </select>
        <input id="teamManager" placeholder="Menajeri">
        <button onclick="addTeam()">Ekle</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <script>
        firebase.initializeApp({
            apiKey: "AIzaSyDo0B8IIDK9Xeq4kIa3I0YK45wJS6vyzGY",
            authDomain: "haxpedia-e5054.firebaseapp.com",
            projectId: "haxpedia-e5054",
            storageBucket: "haxpedia-e5054.firebasestorage.app",
            messagingSenderId: "799081899351",
            appId: "1:799081899351:web:66943d0281fad08b910a12"
        });

        var db = firebase.firestore();
        var auth = firebase.auth();
        var currentUser = null;

        function login() {
            var provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider);
        }

        function logout() {
            auth.signOut();
        }

        function addTeam() {
            if (!currentUser) return alert('Giriş yapın');
            if (currentUser.email !== 'evrenalbayrak96@gmail.com') return alert('Yetkisiz');
            
            db.collection('teams').add({
                name: document.getElementById('teamName').value,
                league: document.getElementById('teamLeague').value,
                manager: document.getElementById('teamManager').value,
                addedBy: currentUser.email
            }).then(() => {
                alert('Eklendi');
                loadTeams();
            });
        }

        function loadTeams() {
            db.collection('teams').get().then(snapshot => {
                var html = '';
                snapshot.forEach(doc => {
                    var team = doc.data();
                    html += '<div class="team-card"><h3>' + team.name + '</h3><p>' + team.league + '</p></div>';
                });
                document.getElementById('teamsList').innerHTML = html;
            });
        }

        auth.onAuthStateChanged(user => {
            currentUser = user;
            if (user) {
                document.getElementById('auth').innerHTML = '<span>' + user.email + '</span> <button onclick="logout()">Çıkış</button>';
                if (user.email === 'evrenalbayrak96@gmail.com') {
                    document.getElementById('adminPanel').style.display = 'block';
                }
                loadTeams();
            } else {
                document.getElementById('auth').innerHTML = '<button class="auth-btn" onclick="login()">Giriş Yap</button>';
                document.getElementById('adminPanel').style.display = 'none';
            }
        });

        loadTeams();
    </script>
</body>
</html>
